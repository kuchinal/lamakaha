set cut_paste_input [stack 0]
version 8.0 v5
BackdropNode {
inputs 0
name BackdropNode19
tile_color 0x494c8401
label "point finder"
note_font "Helvetica bold Bold Bold Bold Bold"
note_font_size 30
selected true
xpos -9909
ypos 4071
bookmark false
bdwidth 500
bdheight 344
}
Camera2 {
inputs 0
translate {{curve x951 55.34722218 55.84314865 56.33902971 56.83495617 57.33088264 57.8267637 58.32269016 58.81861663 59.31449769 59.81042415 60.30635062 60.80223168 61.29815814 61.79408461 62.28996567 62.78589213 63.2818186 63.77769966 64.27362613 64.76955259 65.26543365 65.76136012 66.25728658 66.75316764 67.24909411 67.74502057 68.24090163 68.7368281 69.23275456 69.72863562 70.22456209 70.72048855 71.21636961 71.71229608 72.20822254 72.7041036 73.20003007 73.69595653 74.19183759 74.68776406 75.18369052 75.67957158 76.17549805 76.67142451 77.16730557 77.66323204 78.1591585 78.65503956 79.15096603 79.64689249 80.14277355 80.63869993 81.15077434 81.7470474 82.42980859 82.96841114 83.4507629 83.93098713 84.38503664 84.83816272 85.32307241 85.71225787 85.95536803 86.21508207 86.52279793 86.78451572 86.98692442 87.20746434 87.38052316 87.56142152 87.7493165 87.93553613 88.055675 88.10116322 88.14285383 88.18989458 88.21582349 88.23838325 88.26094508 88.28350691 88.30606668 88.32862851 88.35119033 88.3737501 88.39631193 88.41887376 88.44143352 88.46399535 88.48655718 88.50911694 88.53167877 88.5542406 88.57680037 88.59936219 88.62192402 88.64448379 88.66704562 88.68960745} {curve x951 137.5356924 137.5390449 137.5423972 137.5457497 137.5491022 137.5524544 137.5558069 137.5591595 137.5625117 137.5658642 137.5692167 137.5725689 137.5759215 137.579274 137.5826262 137.5859787 137.5893312 137.5926834 137.596036 137.5993885 137.6027407 137.6060932 137.6094457 137.612798 137.6161505 137.619503 137.6228552 137.6262077 137.6295603 137.6329125 137.636265 137.6396175 137.6429697 137.6463223 137.6496748 137.653027 137.6563795 137.659732 137.6630843 137.6664368 137.6697893 137.6731415 137.676494 137.6798466 137.6831988 137.6865513 137.6899038 137.693256 137.6966086 137.6999611 137.7033133 137.7066658 137.6045329 137.6033958 137.5875016 137.6098934 137.6181998 137.631659 137.6630075 137.6872365 137.7584924 137.8067597 137.7675374 137.779736 137.855583 137.9603058 138.0976735 138.1752823 138.2109502 138.2014602 138.1540262 138.1336904 138.1317602 138.1655036 138.1729201 138.1647196 138.1347509 138.081331 138.0279061 137.9744812 137.9210612 137.8676363 137.8142114 137.7607914 137.7073665 137.6539417 137.6005217 137.5470968 137.4936719 137.4402519 137.386827 137.3334021 137.2799822 137.2265573 137.1731324 137.1197124 137.0662875 137.0128626} {curve x951 -157.1835004 -157.2667764 -157.3500448 -157.4333208 -157.5165968 -157.5998651 -157.6831411 -157.7664171 -157.8496855 -157.9329615 -158.0162375 -158.0995058 -158.1827818 -158.2660578 -158.3493262 -158.4326022 -158.5158782 -158.5991465 -158.6824225 -158.7656985 -158.8489669 -158.9322429 -159.0155189 -159.0987872 -159.1820632 -159.2653392 -159.3486076 -159.4318836 -159.5151596 -159.5984279 -159.6817039 -159.7649799 -159.8482483 -159.9315243 -160.0148003 -160.0980686 -160.1813446 -160.2646206 -160.347889 -160.431165 -160.514441 -160.5977094 -160.6809853 -160.7642613 -160.8475297 -160.9308057 -161.0140817 -161.0973501 -161.180626 -161.263902 -161.3471704 -161.4304464 -161.5040489 -161.568119 -161.6072371 -161.7217085 -161.8827744 -162.0654917 -162.2718559 -162.5015525 -162.7175215 -162.905489 -163.0661011 -163.2065814 -163.3402672 -163.4777382 -163.5982685 -163.6587695 -163.6636374 -163.6302543 -163.5922917 -163.5577305 -163.519949 -163.5015219 -163.4858741 -163.4569436 -163.4183486 -163.3691794 -163.3200057 -163.270832 -163.2216627 -163.172489 -163.1233153 -163.074146 -163.0249723 -162.9757986 -162.9266294 -162.8774556 -162.8282819 -162.7791127 -162.7299389 -162.6807652 -162.631596 -162.5824223 -162.5332485 -162.4840793 -162.4349056 -162.3857319}}
rotate {{curve x951 -49.37593953 -48.36353474 -47.35106506 -46.3385749 -45.32637501 -44.31477277 -43.30378524 -42.29370955 -41.28482914 -40.27715425 -39.27096493 -38.26654122 -37.26387628 -36.26325015 -35.2649258 -34.26889639 -33.27544196 -32.28481523 -31.29701278 -30.31230099 -29.33094282 -28.35292974 -27.37853154 -26.40800264 -25.44134305 -24.47881571 -23.52068531 -22.56694843 -21.61787316 -20.67371733 -19.73449289 -18.80046452 -17.87189689 -16.94879853 -16.03144436 -15.12009393 -14.21477199 -13.31574492 -12.42328423 -11.53741297 -10.65840604 -9.786532392 -8.921826174 -8.064561447 -7.215010566 -6.373211948 -5.539442219 -4.71397373 -3.896853867 -3.088356478 -2.288754129 -1.498099968 -1.090902766 -1.245795235 -1.441164579 -1.840873439 -2.35315641 -3.140173281 -4.04996323 -4.975929841 -5.565501952 -5.347135254 -5.061525345 -5.684587581 -6.600459599 -7.283831552 -7.398988541 -6.914952244 -5.882155925 -4.418013096 -3.373759134 -2.94474983 -3.116158976 -3.573475146 -3.86478186 -3.971905693 -3.925955169 -3.943559981 -3.962509061 -3.982799845 -4.00442892 -4.027397992 -4.051704074 -4.077342897 -4.104316168 -4.132620471 -4.162249832 -4.193207665 -4.225489273 -4.259087827 -4.294007596 -4.33024175 -4.367783885 -4.406637843 -4.44679722 -4.488254334 -4.531013026 -4.575065612} {curve x951 -82.1016742 -81.23537399 -80.38281612 -79.54261405 -78.71370913 -77.89513145 -77.08576086 -76.28476409 -75.49138297 -74.70468861 -73.92401165 -73.14873737 -72.37807346 -71.61148718 -70.84846626 -70.08833451 -69.33064113 -68.57496949 -67.82070487 -67.06747161 -66.31492137 -65.56250773 -64.80989602 -64.05679253 -63.30269183 -62.54731389 -61.79039916 -61.03148318 -60.27031324 -59.50666394 -58.74008448 -57.97037681 -57.19732917 -56.42053175 -55.63977966 -54.85490213 -54.06550302 -53.27141498 -52.47247409 -51.66830128 -50.85874969 -50.04367931 -49.22272814 -48.39576982 -47.56267798 -46.72312138 -45.87697022 -45.02414256 -44.16430029 -43.29735804 -42.4232475 -41.54165108 -40.28121822 -38.72018873 -38.02146037 -38.05141075 -37.7768713 -37.32328868 -36.86331984 -36.23326904 -35.75349606 -35.76812632 -35.2258298 -33.74391097 -32.1212561 -30.73590249 -28.80986086 -26.73345091 -24.79119441 -23.10739227 -21.99341745 -21.48194556 -21.71772369 -22.02666681 -22.09982838 -22.31731185 -22.53549712 -22.95071969 -23.36594225 -23.78112896 -24.19623883 -24.61134016 -25.02640222 -25.44137549 -25.85633509 -26.27124518 -26.68606135 -27.10085874 -27.51559636 -27.93023666 -28.34484963 -28.75939601 -29.17383823 -29.58824288 -30.00258265 -30.41680971 -30.83099922 -31.24510675} {curve x951 -1.491329117 -1.570521745 -1.63270368 -1.678920796 -1.710104985 -1.727105432 -1.730697899 -1.721581624 -1.700397579 -1.667722701 -1.62408665 -1.569976717 -1.50582107 -1.432024078 -1.348957238 -1.256937195 -1.156272266 -1.047247506 -0.930092259 -0.8050428612 -0.6723172912 -0.5320776594 -0.3845040052 -0.2297631347 -0.06796375065 0.1007571364 0.2762726142 0.4585162552 0.6473842193 0.8427803501 1.044671457 1.252979207 1.467630815 1.688619237 1.915884711 2.149371739 2.38909345 2.635003312 2.887057143 3.145282903 3.409642173 3.680097387 3.956685471 4.239372486 4.528122575 4.822977573 5.123902047 5.430856298 5.743884295 6.062943775 6.387987782 6.719056016 6.858962196 6.577540046 6.129715278 5.77761988 5.657928499 5.894128393 6.197018254 6.493174403 6.993230481 7.589059899 8.29709353 9.348456011 10.1601019 10.30588546 9.896602598 9.395776416 8.975512315 8.760907771 9.088382898 9.779000401 10.58893362 10.91983409 10.78802937 10.5503977 10.29647688 10.18986787 10.08317434 9.976419335 9.869626766 9.762792362 9.655936614 9.54908428 9.442228532 9.335394128 9.228603267 9.121848264 9.01515644 8.908545725 8.802013557 8.695582134 8.589271947 8.483079581 8.37702638 8.27113625 8.165401507 8.059845202}}
focal {{curve x951 27.54039169 x1048 27.54039169}}
haperture {{curve x951 23.749 x1048 23.749}}
vaperture {{curve x951 17.81175 x1048 17.81175}}
near 10
far 1000000
win_translate {{curve x951 -0 x1048 0} {curve x951 0 x1048 0}}
focal_point {{curve x951 5 x1048 5}}
name Camera6
label "\[basename //inferno2/projects/fast7/scenes/GS_151_2610/cache/common/camera/camMaster/v0006_bdw_Cam_master_and_Asset_publish/GS_151_2610_cam_master.stf]\nv0006_bdw_Cam_master_and_Asset_publish"
selected true
xpos -9886
ypos 4161
}
Dot {
name Dot31
selected true
xpos -9862
ypos 4280
}
set N96ef70c0 [stack 0]
Dot {
name Dot33
selected true
xpos -9862
ypos 4356
}
Axis2 {
inputs 0
translate {215.2149048 140.3291321 -305.092804}
rotate {{degrees(atan((Camera6.translate.y(ref)-translate.y)/sqrt(pow2(sqrt(pow2(Camera6.translate.x(ref)-translate.x)+pow2(Camera6.translate.z(ref)-translate.z))))))} {"Camera6.translate.x(ref)-translate.x >= 0 ? 270-degrees(atan((Camera6.translate.z(ref)-translate.z)/(Camera6.translate.x(ref)-translate.x))): -degrees(atan((Camera6.translate.z(ref)-translate.z)/(Camera6.translate.x(ref)-translate.x)))-270"} 0}
name PointFinder2
selected true
xpos -9716
ypos 4161
addUserKnob {20 User l PointFinder}
addUserKnob {26 info l "" +STARTLINE T "use baked camera! no axis on top of cam! use undistort image!\n"}
addUserKnob {22 linkCam l "link to camera" T "n = nuke.thisNode()\ncam = nuke.selectedNode()\['name'].value()\nn\['cam'].setValue(cam)\nn\['linked'].setValue(cam)\ncam = n\['cam'].getValue()\nexpX = 'degrees(atan(('+cam+'.translate.y(ref)-translate.y)/sqrt(pow2(sqrt(pow2('+cam+'.translate.x(ref)-translate.x)+pow2('+cam+'.translate.z(ref)-translate.z))))))'\nexpY = ''+cam+'.translate.x(ref)-translate.x >= 0 ? 270-degrees(atan(('+cam+'.translate.z(ref)-translate.z)/('+cam+'.translate.x(ref)-translate.x))): -degrees(atan(('+cam+'.translate.z(ref)-translate.z)/('+cam+'.translate.x(ref)-translate.x)))-270'\nn\['rotate'].setExpression(expX,0)\nn\['rotate'].setExpression(expY,1)" +STARTLINE}
addUserKnob {26 linked l "     linked to:     " -STARTLINE T Camera6}
addUserKnob {1 cam l INVISIBLE +INVISIBLE}
cam Camera6
addUserKnob {3 ref l "ref frame"}
ref 1013
addUserKnob {22 now -STARTLINE T "nuke.thisNode()\['ref'].setValue(nuke.frame())"}
addUserKnob {20 stuff3d l "3d stuff" n 1}
addUserKnob {22 createAxis l "create Axis" T "n = nuke.thisNode()\n\na = nuke.nodes.Axis()\n\na\['translate'].setValue(n\['translate'].value())\n\na.setXYpos(n.xpos()+50, n.ypos()+50)" +STARTLINE}
addUserKnob {22 createCard l "create Card" -STARTLINE T "n = nuke.thisNode()\n\na = nuke.nodes.Card2()\n\na\['translate'].setValue(n\['translate'].value())\na\['rotate'].setValue(n\['rotate'].value())\n\na.setXYpos(n.xpos()+50, n.ypos()+50)"}
addUserKnob {20 endGroup n -1}
addUserKnob {20 stuff2d l "2d stuff" n 1}
addUserKnob {12 pos2d l "2d position"}
pos2d {{"\[python -execlocal n\\ =\\ nuke.thisNode()\\nc\\ =\\ nuke.toNode(n\\\['cam'\\].value())\\n\\nv1\\ =\\ nuke.math.Vector3()\\n\\nx\\ =\\ n\\\['world_matrix'\\].getValue()\\\[3\\]\\ny\\ =\\ n\\\['world_matrix'\\].getValue()\\\[7\\]\\nz\\ =\\ n\\\['world_matrix'\\].getValue()\\\[11\\]\\nv1.set(x,y,z)\\n\\n\\n\\n\\nret\\ =\\ nukescripts.projectPoint(c,\\ v1).x]"} {"\[python -execlocal n\\ =\\ nuke.thisNode()\\nc\\ =\\ nuke.toNode(n\\\['cam'\\].value())\\n\\nv1\\ =\\ nuke.math.Vector3()\\n\\nx\\ =\\ n\\\['world_matrix'\\].getValue()\\\[3\\]\\ny\\ =\\ n\\\['world_matrix'\\].getValue()\\\[7\\]\\nz\\ =\\ n\\\['world_matrix'\\].getValue()\\\[11\\]\\nv1.set(x,y,z)\\n\\n\\n\\n\\nret\\ =\\ nukescripts.projectPoint(c,\\ v1).y]"}}
addUserKnob {3 first}
first 1001
addUserKnob {22 now_first l now -STARTLINE T "nuke.thisNode()\['first'].setValue(nuke.frame())"}
addUserKnob {3 last}
last 1024
addUserKnob {22 now_last l now -STARTLINE T "nuke.thisNode()\['last'].setValue(nuke.frame())"}
addUserKnob {22 setglobalrange l "set from global range" T "n = nuke.thisNode()\nn\['first'].setValue(nuke.root()\['first_frame'].value())\nn\['last'].setValue(nuke.root()\['last_frame'].value())" +STARTLINE}
addUserKnob {26 ""}
addUserKnob {22 makeRoto l "make roto" T "n = nuke.thisNode()\nRoto = nuke.nodes.Roto()\nRoto\['xpos'].setValue(int(n.xpos())+100)\nRoto\['ypos'].setValue(int(n.ypos()))\nRoto\['label'].setValue('from '+n.name())\nKnobs = Roto\['curves']\nroot=Knobs.rootLayer\ntransform = root.getTransform()\n\nfirst = int(n\['first'].value())\nlast = int(n\['last'].value())\n\nrc = nuke.nodes.Reconcile3D()\nrc\['xpos'].setValue(int(n.xpos())+100)\nrc\['ypos'].setValue(int(n.ypos()))\nrc.setInput(2,n)\nrc.setInput(1,nuke.toNode(n\['cam'].value()))\nnuke.execute(rc,first,last)\n\n\nfor f in range(first, last):\n\n\n\ttx = rc\['output'].getValueAt(f,0)\n\ttranslx = transform.getTranslationAnimCurve(0)\n\ttranslx.addKey(f,tx)\n\t\n\tty = rc\['output'].getValueAt(f,1)\n\ttransly = transform.getTranslationAnimCurve(1)\n\ttransly.addKey(f,ty)\nnuke.delete(rc)" +STARTLINE}
addUserKnob {22 make_transform l "make transform" -STARTLINE T "n = nuke.thisNode()\nt = nuke.nodes.Transform()\nt\['xpos'].setValue(n.xpos()+100)\nt\['ypos'].setValue(n.ypos())\nt\['label'].setValue('from '+n.name())\n\nt\['translate'].setAnimated()\n\nfirst =int(n\['first'].value())\nlast = int(n\['last'].value())\n\nrc = nuke.nodes.Reconcile3D()\nrc\['xpos'].setValue(n.xpos()+100)\nrc\['ypos'].setValue(n.ypos())\nrc.setInput(2,n)\nrc.setInput(1,nuke.toNode(n\['cam'].value()))\nnuke.execute(rc,first,last)\n\n\n\nfor f in range(first, last):\n\ttx = rc\['output'].getValueAt(f,0)\n\tt\['translate'].setValueAt(tx,f,0)\n\n\tty = rc\['output'].getValueAt(f,1)\n\tt\['translate'].setValueAt(ty,f,1)\n\nnuke.delete(rc)"}
addUserKnob {20 endGroup_1 l endGroup n -1}
}
push $N96ef70c0
Scene {
inputs 2
name Scene2
selected true
xpos -9716
ypos 4256
}
push $cut_paste_input
Dot {
name Dot35
selected true
xpos -9529
ypos 4276
}
Dot {
name Dot32
selected true
xpos -9529
ypos 4356
}
ScanlineRender {
inputs 3
motion_vectors_type distance
name ScanlineRender3
selected true
xpos -9726
ypos 4353
}
